<div class="register-container">
  <div class="register-card">
    <div class="register-header">
      <h1>Meu Cantinho</h1>
      <h2>Criar Nova Conta</h2>
      <p>Preencha os dados abaixo para se cadastrar</p>
    </div>

    <app-loading *ngIf="loading"></app-loading>

    <form [formGroup]="clienteForm" (ngSubmit)="onSubmit()" *ngIf="!loading">
      <!-- Informa√ß√µes Pessoais -->
      <div class="form-section">
        <h3>üë§ Informa√ß√µes Pessoais</h3>

        <div class="form-group">
          <label for="nome">Nome Completo *</label>
          <input
            type="text"
            id="nome"
            formControlName="nome"
            [class.is-invalid]="nome?.invalid && nome?.touched"
            placeholder="Ex: Jo√£o Silva"
          />
          <div class="invalid-feedback" *ngIf="nome?.invalid && nome?.touched">
            <span *ngIf="nome?.errors?.['required']">Nome √© obrigat√≥rio</span>
            <span *ngIf="nome?.errors?.['minlength']">Nome deve ter no m√≠nimo 3 caracteres</span>
            <span *ngIf="nome?.errors?.['maxlength']">Nome deve ter no m√°ximo 150 caracteres</span>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="cpf">CPF (opcional)</label>
            <input
              type="text"
              id="cpf"
              formControlName="cpf"
              [class.is-invalid]="cpf?.invalid && cpf?.touched"
              placeholder="000.000.000-00"
              maxlength="14"
              (input)="formatCpf($event)"
            />
            <div class="invalid-feedback" *ngIf="cpf?.invalid && cpf?.touched">
              <span *ngIf="cpf?.errors?.['pattern']">
                CPF deve estar no formato 000.000.000-00
              </span>
            </div>
          </div>

          <div class="form-group">
            <label for="telefone">Telefone (opcional)</label>
            <input
              type="text"
              id="telefone"
              formControlName="telefone"
              [class.is-invalid]="telefone?.invalid && telefone?.touched"
              placeholder="(99) 99999-9999"
              maxlength="15"
              (input)="formatTelefone($event)"
            />
            <div class="invalid-feedback" *ngIf="telefone?.invalid && telefone?.touched">
              <span *ngIf="telefone?.errors?.['pattern']">
                Telefone deve estar no formato (99) 99999-9999
              </span>
            </div>
          </div>
        </div>
      </div>

      <!-- Dados de Acesso -->
      <div class="form-section">
        <h3>üîê Dados de Acesso</h3>

        <div class="form-group">
          <label for="email">E-mail *</label>
          <input
            type="email"
            id="email"
            formControlName="email"
            [class.is-invalid]="email?.invalid && email?.touched"
            placeholder="exemplo@email.com"
          />
          <div class="invalid-feedback" *ngIf="email?.invalid && email?.touched">
            <span *ngIf="email?.errors?.['required']">E-mail √© obrigat√≥rio</span>
            <span *ngIf="email?.errors?.['email']">E-mail deve ser v√°lido</span>
            <span *ngIf="email?.errors?.['maxlength']">E-mail deve ter no m√°ximo 150 caracteres</span>
          </div>
        </div>

        <div class="form-group">
          <label for="senha">Senha *</label>
          <input
            type="password"
            id="senha"
            formControlName="senha"
            [class.is-invalid]="senha?.invalid && senha?.touched"
            placeholder="M√≠nimo 6 caracteres"
          />
          <div class="invalid-feedback" *ngIf="senha?.invalid && senha?.touched">
            <span *ngIf="senha?.errors?.['required']">Senha √© obrigat√≥ria</span>
            <span *ngIf="senha?.errors?.['minlength']">Senha deve ter no m√≠nimo 6 caracteres</span>
          </div>
        </div>
      </div>

      <div class="form-actions">
        <button
          type="button"
          class="btn btn-secondary"
          (click)="cancel()"
          [disabled]="loading"
        >
          Voltar
        </button>
        <button
          type="submit"
          class="btn btn-primary"
          [disabled]="loading || clienteForm.invalid"
        >
          @if (loading) {
            <span>Cadastrando...</span>
          } @else {
            <span>Cadastrar</span>
          }
        </button>
      </div>
    </form>

    <div class="register-footer">
      <p>J√° tem uma conta? <a routerLink="/login">Fazer login</a></p>
    </div>
  </div>
</div>
